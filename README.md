# 1. Graphql API

API to find the shortest path, nearest node, user preferences for recommendation

---

<!-- TOC -->

- [1. Graphql API](#1-graphql-api)
  - [1.1. Shortest Path API](#11-shortest-path)
  - [1.2. nearbyNode API](#12-nearbynode)
  - [1.3. User Preferences API](#13-user-preferences-api)
  - [1.4. ChatGPT](#14-chatgpt-api)

<!-- /TOC -->

---

## 1.1. Shortest Path

The shortestPath API provides shortest path between two nodes in a map network. It is particularly useful in navigating through complex structures like airports, malls, or campuses.



### 1.1.1 Output
Returns a list of node objects representing the shortest path from the starting node to the destination node.


### 1.1.2 API Example
```
query {
  shortestPath(input: { startNode: "node1", endNode: "node5" }) {
    id
    name
    level
  }
}
```

## 1.2. NearbyNode

The nearbyNode API provides a list of nodes that are closest to the user's current location. It's useful for finding nearby facilities like toilets, shops, or restaurants.

### 1.2.1. Output
Returns a list of node objects representing the closest nodes to the user's current location, limited to the top k nodes.

### 1.2.2. API Example
```
query {
  nearbyNode(input: { curLatitude: 40.7128, curLongitude: -74.0060, k: 5 }) {
    id
    name
    type
    level
  }
}
```

## 1.3. User Preferences
The user query in this GraphQL schema provides the preferences associated with a specific user. This is useful for retrieving and displaying user-specific preferences in applications.

### 1.3.1. Output
Returns the User object including the user's email and a list of their preferences.

### 1.3.2. API Example
```
query {
  user(email: "user@example.com") {
    email
    preferences {
      type
      count
    }
  }
}
```

## 1.4. ChatGPT
The chat query in this GraphQL schema is designed to simulate a chatbot conversation using GPT (Generative Pre-trained Transformer) technology. This API is ideal for integrating AI-driven conversational capabilities into applications.

### 1.4.1. Output
The response generated by the GPT chatbot based on the user's input.

### 1.4.2. API Example
```
query {
  chat(userInput: "Can you plan a trip for me?") 
}
```

# 2 Development

## 2.1 Requirement

    - aws-cli
    - pnpm
    - node 18

## 2.2 Local Development

    > make
    > cd js-graphql
    > pnpm dev

## 2.3 Cloud Deployment

    > aws configure
    > pnpm prod
